<!doctype html>
<html data-n-head-ssr>
  <head>
    <meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="desc" name="desc" content=""><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="adam.harpur.io"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https://adam.harpur.io"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="~/assets/logo.png"><title>oversight</title><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/cba6ee4.js" as="script"><link rel="preload" href="/_nuxt/6d3c52c.js" as="script"><link rel="preload" href="/_nuxt/526a2af.js" as="script"><link rel="preload" href="/_nuxt/5575490.js" as="script"><link rel="preload" href="/_nuxt/a985a8f.js" as="script"><style data-vue-ssr-id="210fdcbc:0 5925bf4b:0 fc63198e:0 cb8e81ca:0 de1b01f4:0 02929781:0 611b39de:0 14c4c930:0">@tailwind base;@tailwind components;@tailwind utilities;code[class*=language-],pre[class*=language-]{word-wrap:normal;background:#263238;color:#c3cee3;font-family:Roboto Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#363636}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#363636}:not(pre)>code[class*=language-]{border-radius:.2em;padding:.1em;white-space:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1.25em 1em;position:relative}.language-css>code,.language-sass>code,.language-scss>code{color:#fd9170}[class*=language-] .namespace{opacity:.7}.token.atrule{color:#c792ea}.token.attr-name{color:#ffcb6b}.token.attr-value,.token.attribute{color:#c3e88d}.token.boolean{color:#c792ea}.token.builtin{color:#ffcb6b}.token.cdata,.token.char{color:#80cbc4}.token.class{color:#ffcb6b}.token.class-name,.token.color{color:#f2ff00}.token.comment{color:#546e7a}.token.constant{color:#c792ea}.token.deleted{color:#f07178}.token.doctype{color:#546e7a}.token.entity{color:#f07178}.token.function{color:#c792ea}.token.hexcode{color:#f2ff00}.token.id,.token.important{color:#c792ea;font-weight:700}.token.inserted{color:#80cbc4}.token.keyword{color:#c792ea;font-style:italic}.token.number{color:#fd9170}.token.operator{color:#89ddff}.token.prolog{color:#546e7a}.token.property{color:#80cbc4}.token.pseudo-class,.token.pseudo-element{color:#c3e88d}.token.punctuation{color:#89ddff}.token.regex{color:#f2ff00}.token.selector{color:#f07178}.token.string{color:#c3e88d}.token.symbol{color:#c792ea}.token.tag,.token.unit{color:#f07178}.token.url{color:#fd9170}.token.variable{color:#f07178}.nuxt-progress{background-color:#000;height:2px;left:0;opacity:1;position:fixed;right:0;top:0;transition:width .1s,opacity .4s;width:0;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box;font-size:16px;word-spacing:1px}*,:after,:before{box-sizing:border-box;margin:0}main.content-wrapper{background:url(/_nuxt/img/bg.7c2eac8.png)}.content{border:4px double grey}.nuxt-content strong{font-style:italic}.nuxt-content blockquote{font-style:italic;@apply ml-3;@apply px-3;border-left:2px solid #551ab8}.nuxt-content a{color:#551ab8;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-lg;@apply underline;letter-spacing:1px}.nuxt-content a[target=_blank]:after{content:"↑"}.nuxt-content h2{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-2xl;line-height:1.3}.nuxt-content h3{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-xl;line-height:1.3}.nuxt-content h4{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-lg;line-height:1.3}.nuxt-content li,.nuxt-content p{font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;line-height:1.7}@media screen and (min-width:600px){.nuxt-content li,.nuxt-content p{font-size:18px}}.nuxt-content p{@apply mb-4;}.nuxt-content ul{list-style:circle;margin-left:1em}.nuxt-content ol{@apply list-decimal;@apply list-inside;@apply mb-4;}body{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}.title{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-style:italic;@apply font-semibold;@apply text-3xl;letter-spacing:1px}.subtitle{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-2xl;letter-spacing:1px}.tag{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-lg;letter-spacing:1px}p>code{background-color:#efefef;color:#324859;font-style:italic;font-weight:400;padding:2px}.navbar{@apply py-3 px-5;color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}@media screen and (min-width:600px){.navbar{@apply flex justify-between items-center;}}.navbar-item{border-bottom:2px solid #ccc;font-style:italic;@apply mr-5;font-size:1.25rem;@apply font-semibold;}.navbar-item:last-child{@apply mr-0;}.navbar-item:hover{border-bottom:2px solid #551ab8}.navbar-item-wrapper{@apply text-center;}.navbar-logo{@apply flex items-center;@apply mx-auto mb-3;font-size:1.3rem;@apply font-semibold;}@media screen and (min-width:600px){.navbar-logo{@apply mb-0;}}.navbar-logo-image{@apply inline-block;width:36px;@apply mr-3;}.current-navbar-item{border-bottom:2px solid #551ab8}.nuxt-content strong{font-style:italic}.nuxt-content blockquote{font-style:italic;@apply ml-3;@apply px-3;border-left:2px solid #551ab8}.nuxt-content a{color:#551ab8;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-lg;@apply underline;letter-spacing:1px}.nuxt-content a[target=_blank]:after{content:"↑"}.nuxt-content h2{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-2xl;line-height:1.3}.nuxt-content h3{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-xl;line-height:1.3}.nuxt-content h4{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-lg;line-height:1.3}.nuxt-content li,.nuxt-content p{font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;line-height:1.7}@media screen and (min-width:600px){.nuxt-content li,.nuxt-content p{font-size:18px}}.nuxt-content p{@apply mb-4;}.nuxt-content ul{list-style:circle;margin-left:1em}.nuxt-content ol{@apply list-decimal;@apply list-inside;@apply mb-4;}body{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}.title{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-style:italic;@apply font-semibold;@apply text-3xl;letter-spacing:1px}.subtitle{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-2xl;letter-spacing:1px}.tag{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-lg;letter-spacing:1px}p>code{background-color:#efefef;color:#324859;font-style:italic;font-weight:400;padding:2px}.footer{@apply text-center;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply text-lg;@apply mt-12;@apply p-8;}.brand-logo{animation:appear 1s;width:32px}.nuxt-content strong{font-style:italic}.nuxt-content blockquote{font-style:italic;@apply ml-3;@apply px-3;border-left:2px solid #551ab8}.nuxt-content a{color:#551ab8;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-lg;@apply underline;letter-spacing:1px}.nuxt-content a[target=_blank]:after{content:"↑"}.nuxt-content h2{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-2xl;line-height:1.3}.nuxt-content h3{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-xl;line-height:1.3}.nuxt-content h4{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-lg;line-height:1.3}.nuxt-content li,.nuxt-content p{font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;line-height:1.7}@media screen and (min-width:600px){.nuxt-content li,.nuxt-content p{font-size:18px}}.nuxt-content p{@apply mb-4;}.nuxt-content ul{list-style:circle;margin-left:1em}.nuxt-content ol{@apply list-decimal;@apply list-inside;@apply mb-4;}body{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}.title{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-style:italic;@apply font-semibold;@apply text-3xl;letter-spacing:1px}.subtitle{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-2xl;letter-spacing:1px}.tag{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-lg;letter-spacing:1px}p>code{background-color:#efefef;color:#324859;font-style:italic;font-weight:400;padding:2px}.social-media-item{@apply flex flex-col justify-center items-center;@apply mb-3 mr-4;height:30px;width:30px}.social-media-label{clip:rect(0,0,0,0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.nuxt-content_dSLcB strong{font-style:italic}.nuxt-content_dSLcB blockquote{font-style:italic;@apply ml-3;@apply px-3;border-left:2px solid #551ab8}.nuxt-content_dSLcB a{color:#551ab8;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-lg;@apply underline;letter-spacing:1px}.nuxt-content_dSLcB a[target=_blank]:after{content:"↑"}.nuxt-content_dSLcB h2{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-2xl;line-height:1.3}.nuxt-content_dSLcB h3{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-xl;line-height:1.3}.nuxt-content_dSLcB h4{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-bold;@apply mt-5 mb-5;@apply pb-3;@apply text-lg;line-height:1.3}.nuxt-content_dSLcB li,.nuxt-content_dSLcB p{font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;line-height:1.7}@media screen and (min-width:600px){.nuxt-content_dSLcB li,.nuxt-content_dSLcB p{font-size:18px}}.nuxt-content_dSLcB p{@apply mb-4;}.nuxt-content_dSLcB ul{list-style:circle;margin-left:1em}.nuxt-content_dSLcB ol{@apply list-decimal;@apply list-inside;@apply mb-4;}body{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}.title_d6rol{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-style:italic;@apply font-semibold;@apply text-3xl;letter-spacing:1px}.subtitle_M7uZF{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-2xl;letter-spacing:1px}.tag_\+EbIf{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;@apply font-semibold;@apply text-lg;letter-spacing:1px}p>code{background-color:#efefef;color:#324859;font-style:italic;font-weight:400;padding:2px}.small_4DY8U{display:inline-block;width:30px}</style><link rel="preload" href="/_nuxt/static/1696604814/blog/building-better-software/state.js" as="script"><link rel="preload" href="/_nuxt/static/1696604814/blog/building-better-software/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1696604814/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="flex flex-col min-h-screen max-width-full"><nav class="navbar"><div class="flex items-center"><a href="/" class="navbar-logo nuxt-link-active"><img src="/_nuxt/img/logo.176e8a4.png" alt="site logo" class="navbar-logo-image"></a></div> <div class="navbar-item-wrapper"><span class="mr-5"><a href="/blog" class="navbar-item nuxt-link-active">blog</a> <!----></span><span class="mr-5"><a href="/notes" class="navbar-item">notes</a> <!----></span><span class="mr-5"><a href="/archive" class="navbar-item">archive</a> <!----></span></div></nav> <hr> <main class="content-wrapper flex justify-center"><div class="my-5 content bg-white lg:w-3/5 md:w-full max-width-full" data-v-e2e0216e><main class="bg-white py-5 px-8 w-screen lg:w-full" data-v-e2e0216e><article><p class="my-5">5 February 2022, 07:02</p> <h1 class="title">building better software</h1> <hr> <div class="p-2 nuxt-content"><h3 id="manage-complexity"><a href="#manage-complexity" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Manage complexity</h3>
<blockquote>
<p>The biggest problem in the development and maintenance of large-scale software systems is complexity — large systems are hard to understand.</p>
</blockquote>
<p>The threads of complexity...</p>
<blockquote>
<p>The major contributor to this complexity in many systems is the handling of state and the burden that this adds when trying to analyse and reason about the system. Other closely related contributors are code volume, and explicit concern with the flow of control through the system.</p>
</blockquote>
<p><a href="http://curtclifton.net/papers/MoseleyMarks06a.pdf" rel="nofollow noopener noreferrer" target="_blank">Out of the Tarpit - Ben Mosely, Peter Marks</a></p>
<h4 id="balance-and-harmony"><a href="#balance-and-harmony" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Balance and harmony</h4>
<p>A key idea is ensure that state, flow of control, and code volume are in balance and harmony. What is the application modelling (state), how does the application interact with that model (flow of control) and how much logic is needed to achieve the desired outcome (code volume).</p>
<p>Any application with a shared mutable state can be difficult to test or share code across multiple components.</p>
<h4 id="micro-complexity"><a href="#micro-complexity" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Micro complexity</h4>
<p>Micro complexity is addressed at the component level. In order for component code to be testable, it should avoid hidden state and adhere to the single responsibility principle. The first step to fixing issues with hidden state is utilizing dependency injection.</p>
<p>Ask yourself...</p>
<blockquote>
<p>Can I know the result of this at all times?</p>
</blockquote>
<blockquote>
<p>Can I reuse this code?</p>
</blockquote>
<blockquote>
<p>Can I test this code?</p>
</blockquote>
<p>It is impossible to write good tests for bad code, you can write hacky tests...perhaps. Commit to writing testable code.</p>
<p>How?...</p>
<ul>
<li>Reduce hidden state</li>
<li>Do not voilate the single responsibility principle</li>
<li>Avoid nested logic</li>
</ul>
<h4 id="meso-complexity"><a href="#meso-complexity" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Meso complexity</h4>
<p>Meso complexity is addressed at the inter component level.</p>
<p>How to work across components...</p>
<ul>
<li>Modelling state as nouns</li>
<li>Defining methods as verbs &lt;select,create,update,delete,combine,compute><strong>ing</strong></li>
<li>Handling conditions</li>
<li>Iterating over collections</li>
</ul>
<h4 id="the-importance-of-types"><a href="#the-importance-of-types" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>The importance of types</h4>
<ul>
<li>Easier to communicate intention of code</li>
<li>Better IDE introspection</li>
<li>Type composition</li>
<li>Future JS today</li>
</ul>
<h4 id="immutible-operations-on-state"><a href="#immutible-operations-on-state" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Immutible operations on state</h4>
<div class="nuxt-content-highlight"><pre class="language-typescript line-numbers"><code><span class="token keyword">function</span> <span class="token function">addEntity</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>collection<span class="token punctuation">,</span> entity<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">updateEntity</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> collection<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>e <span class="token operator">=></span> e<span class="token punctuation">.</span>id <span class="token operator">===</span> entity<span class="token punctuation">.</span>id <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> entity<span class="token punctuation">)</span> <span class="token operator">:</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">deleteEntity</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> collection<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e <span class="token operator">=></span> e<span class="token punctuation">.</span>id <span class="token operator">!==</span> entity<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h4 id="creating-a-store"><a href="#creating-a-store" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Creating a store:</h4>
<ul>
<li>Define state</li>
<li>Use reducers</li>
<li>Higher order functions</li>
<li>Immutability</li>
</ul>
<div class="nuxt-content-highlight"><pre class="language-typescript line-numbers"><code><span class="token keyword">interface</span> <span class="token class-name">BaseEntity</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Action</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    payload<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Client</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    lastName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    company<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> peter<span class="token operator">:</span> Client <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    firstName<span class="token operator">:</span> <span class="token string">'Peter'</span><span class="token punctuation">,</span>
    lastName<span class="token operator">:</span> <span class="token string">'Porker'</span><span class="token punctuation">,</span>
    company<span class="token operator">:</span> <span class="token string">'Acme, Inc'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> john<span class="token operator">:</span> Client <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
    firstName<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span>
    lastName<span class="token operator">:</span> <span class="token string">'Doe'</span><span class="token punctuation">,</span>
    company<span class="token operator">:</span> <span class="token string">'NA'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> clients<span class="token operator">:</span> Client<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>peter<span class="token punctuation">,</span> john<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">ClientsState</span> <span class="token punctuation">{</span>
    clients<span class="token operator">:</span> Client<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    currentClient<span class="token operator">:</span> Client<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> newClient<span class="token operator">:</span> Client <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    firstName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    lastName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    company<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initialClientsState<span class="token operator">:</span> ClientsState <span class="token operator">=</span> <span class="token punctuation">{</span>
    clients<span class="token punctuation">,</span>
    currentClient<span class="token operator">:</span> newClient<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">CLIENT_LOAD</span> <span class="token operator">=</span> <span class="token string">'[Client] Load'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CLIENT_CREATE</span> <span class="token operator">=</span> <span class="token string">'[Client] Create'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CLIENT_UPDATE</span> <span class="token operator">=</span> <span class="token string">'[Client] Update'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CLIENT_DELETE</span> <span class="token operator">=</span> <span class="token string">'[Client] Delete'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CLIENT_SELECT</span> <span class="token operator">=</span> <span class="token string">'[Client] Select'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CLIENT_CLEAR</span> <span class="token operator">=</span> <span class="token string">'[Client] Clear'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">loadClients</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> clients<span class="token punctuation">)</span><span class="token operator">:</span> ClientsState <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        clients<span class="token punctuation">,</span>
        currentClient<span class="token operator">:</span> state<span class="token punctuation">.</span>currentClient
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">selectClient</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token operator">:</span> ClientsState <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        clients<span class="token operator">:</span> state<span class="token punctuation">.</span>clients<span class="token punctuation">,</span>
        currentClient<span class="token operator">:</span> client
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">clearClient</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token operator">:</span> ClientsState <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        clients<span class="token operator">:</span> state<span class="token punctuation">.</span>clients<span class="token punctuation">,</span>
        currentClient<span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">createClient</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token operator">:</span> ClientsState <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        clients<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">.</span>clients<span class="token punctuation">,</span> client<span class="token punctuation">]</span><span class="token punctuation">,</span>
        currentClient<span class="token operator">:</span> state<span class="token punctuation">.</span>currentClient
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">updateClient</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token operator">:</span> ClientsState <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        clients<span class="token operator">:</span> state<span class="token punctuation">.</span>clients<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>c <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>id <span class="token operator">===</span> client<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> client<span class="token punctuation">)</span> <span class="token operator">:</span> c<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        currentClient<span class="token operator">:</span> state<span class="token punctuation">.</span>currentClient
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">deleteClient</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token operator">:</span> ClientsState <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        clients<span class="token operator">:</span> state<span class="token punctuation">.</span>clients<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c<span class="token punctuation">.</span>id <span class="token operator">!==</span> client<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
        currentClient<span class="token operator">:</span> state<span class="token punctuation">.</span>currentClient
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">clientsReducer</span><span class="token punctuation">(</span>
    state<span class="token operator">:</span> ClientsState <span class="token operator">=</span> initialClientsState<span class="token punctuation">,</span>
    action<span class="token operator">:</span> Action
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token constant">CLIENT_LOAD</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">loadClients</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">CLIENT_SELECT</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">selectClient</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">CLIENT_CLEAR</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">clearClient</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">CLIENT_CREATE</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">createClient</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">CLIENT_UPDATE</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">updateClient</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">CLIENT_DELETE</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">deleteClient</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ClientsStore</span> <span class="token punctuation">{</span>
    reducer<span class="token punctuation">;</span>
    state<span class="token operator">:</span> ClientsState<span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>state<span class="token operator">:</span> ClientsState<span class="token punctuation">,</span> reducer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reducer <span class="token operator">=</span> reducer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">select</span><span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token operator">:</span> Action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reducer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> jane<span class="token operator">:</span> Client <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span>
    firstName<span class="token operator">:</span> <span class="token string">'Jane'</span><span class="token punctuation">,</span>
    lastName<span class="token operator">:</span> <span class="token string">'Doe'</span><span class="token punctuation">,</span>
    company<span class="token operator">:</span> <span class="token string">'Anon'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> clientsStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClientsStore</span><span class="token punctuation">(</span>initialClientsState<span class="token punctuation">,</span> clientsReducer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> aClient <span class="token operator">=</span> clientsStore<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'currentClient'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
clientsStore<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token constant">CLIENT_CREATE</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> jane <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> allClients <span class="token operator">=</span> clientsStore<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'clients'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">AppState</span> <span class="token punctuation">{</span>
    clientsState<span class="token operator">:</span> ClientsState<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> appState<span class="token operator">:</span> AppState <span class="token operator">=</span> <span class="token punctuation">{</span>
    clientsState<span class="token operator">:</span> initialClientsState<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<h4 id="macro-complexity"><a href="#macro-complexity" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Macro complexity</h4>
<p>Macro complexity is addressed at the application or applications level. How applications communicate across application boundaries.</p>
<ul>
<li>RESTful API's</li>
<li>Events</li>
<li>Hooks</li>
</ul>
<h4 id="time-and-asynchronous-programming"><a href="#time-and-asynchronous-programming" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Time and asynchronous programming</h4>
<p>Dealing with time, the fifth element of programming.A promise is effective when managing a single asynchronous event. Observables coordinate multiple asynchronous events since streaming values are emitted over time.</p>
<ul>
<li>stream of data</li>
<li>flip to initial output and input (subscriber)</li>
</ul>
<h4 id="reference"><a href="#reference" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Reference</h4>
<p><a href="https://frontendmasters.com/courses/enterprise-patterns/" rel="nofollow noopener noreferrer" target="_blank">Enterprise Architecture Patterns</a></p></div></article></main> <section class="mb-5 flex flex-col sm:flex-row" data-v-64af341a data-v-e2e0216e><hr data-v-64af341a> <a href="/blog/better-testing" class="p-5 navbar-item" data-v-64af341a><span class="text-xl" data-v-64af341a>← better ui testing </span></a> <hr data-v-64af341a> <a href="/blog/solid-typescript" class="ml-auto p-5 navbar-item" data-v-64af341a><span class="text-xl" data-v-64af341a>SOLID typescript →</span></a></section></div></main> <hr> <footer class="footer"><ul class="flex justify-center"><li><a href="https://www.twitter.com/admhpr" class="social-media-item"><img src="/_nuxt/img/twitter.c2fdf95.png" alt="twitter icon" class="small_4DY8U"> <span class="social-media-label">Twitter</span></a></li><li><a href="https://www.github.com/admhpr" class="social-media-item"><img src="/_nuxt/img/github.27f8837.png" alt="github icon" class="small_4DY8U"> <span class="social-media-label">GitHub</span></a></li></ul> <div class="flex justify-center">adam harpur 2023 ©</div> <div class="flex justify-center"><a href="https://www.nuxtjs.org"><img src="/_nuxt/img/nuxt-logo.33a988a.jpg" alt="nuxt logo" class="pb-10 brand-logo"></a> <a href="https://tailwindcss.com"><img src="/_nuxt/img/tailwind-logo.a175096.png" alt="tailwind logo" class="pb-10 brand-logo"></a></div></footer></div></div></div><script defer src="/_nuxt/static/1696604814/blog/building-better-software/state.js"></script><script src="/_nuxt/cba6ee4.js" defer></script><script src="/_nuxt/a985a8f.js" defer></script><script src="/_nuxt/6d3c52c.js" defer></script><script src="/_nuxt/526a2af.js" defer></script><script src="/_nuxt/5575490.js" defer></script>
  </body>
</html>
