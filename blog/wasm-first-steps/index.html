<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>oversight</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="desc" name="desc" content=""><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="adam.harpur.io"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https://adam.harpur.io"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="~/assets/logo.png"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/7fbf335.js" as="script"><link rel="preload" href="/_nuxt/acb0acf.js" as="script"><link rel="preload" href="/_nuxt/2aef28c.js" as="script"><link rel="preload" href="/_nuxt/d794848.js" as="script"><link rel="preload" href="/_nuxt/6bb2c61.js" as="script"><style data-vue-ssr-id="0211d3d2:0 0623093e:0 fa7ff0ca:0 56b15182:0 01232304:0 5ec9e21a:0 2b7fc144:0 4836cc41:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.space-x-2>:not(template)~:not(template){--space-x-reverse:0;margin-right:calc(.5rem*var(--space-x-reverse));margin-left:calc(.5rem*(1 - var(--space-x-reverse)))}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-gray-700{--bg-opacity:1;background-color:#4a5568;background-color:rgba(74,85,104,var(--bg-opacity))}.bg-secondary{--bg-opacity:1;background-color:#2c3e50;background-color:rgba(44,62,80,var(--bg-opacity))}.hover\:bg-secondary:hover{--bg-opacity:1;background-color:#2c3e50;background-color:rgba(44,62,80,var(--bg-opacity))}.focus\:bg-gray-600:focus{--bg-opacity:1;background-color:#718096;background-color:rgba(113,128,150,var(--bg-opacity))}.rounded-md{border-radius:.375rem}.rounded-full{border-radius:9999px}.border{border-width:1px}.flex{display:flex}.table{display:table}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.font-mono{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}.text-xl{font-size:1.25rem}.my-5{margin-top:1.25rem;margin-bottom:1.25rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mt-5{margin-top:1.25rem}.mr-5{margin-right:1.25rem}.mb-5{margin-bottom:1.25rem}.ml-5{margin-left:1.25rem}.mt-10{margin-top:2.5rem}.mb-10{margin-bottom:2.5rem}.ml-auto{margin-left:auto}.max-w-full{max-width:100%}.min-h-screen{min-height:100vh}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.p-2{padding:.5rem}.p-5{padding:1.25rem}.p-8{padding:2rem}.p-10{padding:2.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.px-8{padding-left:2rem;padding-right:2rem}.pb-10{padding-bottom:2.5rem}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.text-gray-100{--text-opacity:1;color:#f7fafc;color:rgba(247,250,252,var(--text-opacity))}.hover\:text-white:hover{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.focus\:text-white:focus{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.underline{text-decoration:underline}.w-full{width:100%}.w-screen{width:100vw}.z-10{z-index:10}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:container{width:100%}}@media (min-width:640px) and (min-width:640px){.sm\:container{max-width:640px}}@media (min-width:640px) and (min-width:768px){.sm\:container{max-width:768px}}@media (min-width:640px) and (min-width:1024px){.sm\:container{max-width:1024px}}@media (min-width:640px) and (min-width:1280px){.sm\:container{max-width:1280px}}@media (min-width:640px){.sm\:flex-row{flex-direction:row}}@media (min-width:768px){.md\:container{width:100%}}@media (min-width:768px) and (min-width:640px){.md\:container{max-width:640px}}@media (min-width:768px) and (min-width:768px){.md\:container{max-width:768px}}@media (min-width:768px) and (min-width:1024px){.md\:container{max-width:1024px}}@media (min-width:768px) and (min-width:1280px){.md\:container{max-width:1280px}}@media (min-width:768px){.md\:w-full{width:100%}}@media (min-width:1024px){.lg\:container{width:100%}}@media (min-width:1024px) and (min-width:640px){.lg\:container{max-width:640px}}@media (min-width:1024px) and (min-width:768px){.lg\:container{max-width:768px}}@media (min-width:1024px) and (min-width:1024px){.lg\:container{max-width:1024px}}@media (min-width:1024px) and (min-width:1280px){.lg\:container{max-width:1280px}}@media (min-width:1024px){.lg\:w-3\/5{width:60%}.lg\:w-full{width:100%}}@media (min-width:1280px){.xl\:container{width:100%}}@media (min-width:1280px) and (min-width:640px){.xl\:container{max-width:640px}}@media (min-width:1280px) and (min-width:768px){.xl\:container{max-width:768px}}@media (min-width:1280px) and (min-width:1024px){.xl\:container{max-width:1024px}}@media (min-width:1280px) and (min-width:1280px){.xl\:container{max-width:1280px}}code[class*=language-],pre[class*=language-]{text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono,monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#363636}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#363636}:not(pre)>code[class*=language-]{white-space:normal;border-radius:.2em;padding:.1em}pre[class*=language-]{overflow:auto;position:relative;margin:.5em 0;padding:1.25em 1em}.language-css>code,.language-sass>code,.language-scss>code{color:#fd9170}[class*=language-] .namespace{opacity:.7}.token.atrule{color:#c792ea}.token.attr-name{color:#ffcb6b}.token.attr-value,.token.attribute{color:#c3e88d}.token.boolean{color:#c792ea}.token.builtin{color:#ffcb6b}.token.cdata,.token.char{color:#80cbc4}.token.class{color:#ffcb6b}.token.class-name,.token.color{color:#f2ff00}.token.comment{color:#546e7a}.token.constant{color:#c792ea}.token.deleted{color:#f07178}.token.doctype{color:#546e7a}.token.entity{color:#f07178}.token.function{color:#c792ea}.token.hexcode{color:#f2ff00}.token.id,.token.important{color:#c792ea;font-weight:700}.token.inserted{color:#80cbc4}.token.keyword{color:#c792ea;font-style:italic}.token.number{color:#fd9170}.token.operator{color:#89ddff}.token.prolog{color:#546e7a}.token.property{color:#80cbc4}.token.pseudo-class,.token.pseudo-element{color:#c3e88d}.token.punctuation{color:#89ddff}.token.regex{color:#f2ff00}.token.selector{color:#f07178}.token.string{color:#c3e88d}.token.symbol{color:#c792ea}.token.tag,.token.unit{color:#f07178}.token.url{color:#fd9170}.token.variable{color:#f07178}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}main.content-wrapper{background:url(/_nuxt/img/bg.3d7f30b.png)}.content{border:4px double grey}.nuxt-content strong{font-style:italic}.nuxt-content blockquote{font-style:italic;margin-left:.75rem;padding-left:.75rem;padding-right:.75rem;border-left:2px solid #551ab8}.nuxt-content a{color:#551ab8;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;font-size:1.125rem;text-decoration:underline;letter-spacing:1px}.nuxt-content a[target=_blank]:after{content:"↑"}.nuxt-content h2{font-size:1.5rem}.nuxt-content h2,.nuxt-content h3{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:700;margin-top:1.25rem;margin-bottom:1.25rem;padding-bottom:.75rem;line-height:1.3}.nuxt-content h3{font-size:1.25rem}.nuxt-content li,.nuxt-content p{line-height:1.7;font-size:16px;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}@media screen and (min-width:600px){.nuxt-content li,.nuxt-content p{font-size:18px}}.nuxt-content p{margin-bottom:1rem}.nuxt-content ul{list-style-type:disc}.nuxt-content ol{list-style-type:decimal;list-style-position:inside;margin-bottom:1rem}body{font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#2c3e50}.title{font-size:1.875rem}.subtitle,.title{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;letter-spacing:1px}.subtitle{font-size:1.5rem}.tag{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;font-size:1.125rem;letter-spacing:1px}p>code{color:#324859;font-weight:400;font-style:italic;background-color:#efefef;padding:2px}.navbar{padding:.75rem 1.25rem;color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}@media screen and (min-width:600px){.navbar{display:flex;justify-content:space-between;align-items:center}}.navbar-item{margin-right:1.25rem;font-size:.9rem;font-weight:500}.navbar-item:last-child{margin-right:0}.navbar-item:hover{border-bottom:2px solid #551ab8}.navbar-item-wrapper{text-align:center}.navbar-logo{display:flex;align-items:center;margin-left:auto;margin-right:auto;margin-bottom:.75rem;font-size:1.3rem;font-weight:600}@media screen and (min-width:600px){.navbar-logo{margin-bottom:0}}.navbar-logo-image{display:inline-block;width:36px;margin-right:.75rem}.current-navbar-item{border-bottom:2px solid #551ab8}.nuxt-content strong{font-style:italic}.nuxt-content blockquote{font-style:italic;margin-left:.75rem;padding-left:.75rem;padding-right:.75rem;border-left:2px solid #551ab8}.nuxt-content a{color:#551ab8;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;font-size:1.125rem;text-decoration:underline;letter-spacing:1px}.nuxt-content a[target=_blank]:after{content:"↑"}.nuxt-content h2{font-size:1.5rem}.nuxt-content h2,.nuxt-content h3{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:700;margin-top:1.25rem;margin-bottom:1.25rem;padding-bottom:.75rem;line-height:1.3}.nuxt-content h3{font-size:1.25rem}.nuxt-content li,.nuxt-content p{line-height:1.7;font-size:16px;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}@media screen and (min-width:600px){.nuxt-content li,.nuxt-content p{font-size:18px}}.nuxt-content p{margin-bottom:1rem}.nuxt-content ul{list-style-type:disc}.nuxt-content ol{list-style-type:decimal;list-style-position:inside;margin-bottom:1rem}body{font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#2c3e50}.title{font-size:1.875rem}.subtitle,.title{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;letter-spacing:1px}.subtitle{font-size:1.5rem}.tag{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;font-size:1.125rem;letter-spacing:1px}p>code{color:#324859;font-weight:400;font-style:italic;background-color:#efefef;padding:2px}.footer{text-align:center;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:1.125rem;margin-top:3rem;padding:2rem}.brand-logo{width:32px;-webkit-animation:appear 1s;animation:appear 1s}.nuxt-content strong{font-style:italic}.nuxt-content blockquote{font-style:italic;margin-left:.75rem;padding-left:.75rem;padding-right:.75rem;border-left:2px solid #551ab8}.nuxt-content a{color:#551ab8;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;font-size:1.125rem;text-decoration:underline;letter-spacing:1px}.nuxt-content a[target=_blank]:after{content:"↑"}.nuxt-content h2{font-size:1.5rem}.nuxt-content h2,.nuxt-content h3{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:700;margin-top:1.25rem;margin-bottom:1.25rem;padding-bottom:.75rem;line-height:1.3}.nuxt-content h3{font-size:1.25rem}.nuxt-content li,.nuxt-content p{line-height:1.7;font-size:16px;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}@media screen and (min-width:600px){.nuxt-content li,.nuxt-content p{font-size:18px}}.nuxt-content p{margin-bottom:1rem}.nuxt-content ul{list-style-type:disc}.nuxt-content ol{list-style-type:decimal;list-style-position:inside;margin-bottom:1rem}body{font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#2c3e50}.title{font-size:1.875rem}.subtitle,.title{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;letter-spacing:1px}.subtitle{font-size:1.5rem}.tag{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;font-size:1.125rem;letter-spacing:1px}p>code{color:#324859;font-weight:400;font-style:italic;background-color:#efefef;padding:2px}.social-media-item{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-bottom:.75rem;margin-right:1rem;width:30px;height:30px}.social-media-label{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.nuxt-content_2F1KW strong{font-style:italic}.nuxt-content_2F1KW blockquote{font-style:italic;margin-left:.75rem;padding-left:.75rem;padding-right:.75rem;border-left:2px solid #551ab8}.nuxt-content_2F1KW a{color:#551ab8;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;font-size:1.125rem;text-decoration:underline;letter-spacing:1px}.nuxt-content_2F1KW a[target=_blank]:after{content:"↑"}.nuxt-content_2F1KW h2{font-size:1.5rem}.nuxt-content_2F1KW h2,.nuxt-content_2F1KW h3{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:700;margin-top:1.25rem;margin-bottom:1.25rem;padding-bottom:.75rem;line-height:1.3}.nuxt-content_2F1KW h3{font-size:1.25rem}.nuxt-content_2F1KW li,.nuxt-content_2F1KW p{line-height:1.7;font-size:16px;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}@media screen and (min-width:600px){.nuxt-content_2F1KW li,.nuxt-content_2F1KW p{font-size:18px}}.nuxt-content_2F1KW p{margin-bottom:1rem}.nuxt-content_2F1KW ul{list-style-type:disc}.nuxt-content_2F1KW ol{list-style-type:decimal;list-style-position:inside;margin-bottom:1rem}body{font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#2c3e50}.title_3MO34{font-size:1.875rem}.subtitle_2hTZM,.title_3MO34{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;letter-spacing:1px}.subtitle_2hTZM{font-size:1.5rem}.tag_3xPs0{color:#2c3e50;font-family:Poppins,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-weight:600;font-size:1.125rem;letter-spacing:1px}p>code{color:#324859;font-weight:400;font-style:italic;background-color:#efefef;padding:2px}.small_3zOPC{width:30px;display:inline-block}</style><link rel="preload" href="/_nuxt/static/1632587912/blog/wasm-first-steps/state.js" as="script"><link rel="preload" href="/_nuxt/static/1632587912/blog/wasm-first-steps/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1632587912/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="flex flex-col min-h-screen max-width-full"><nav class="navbar"><div class="flex items-center"><a href="/" class="navbar-logo nuxt-link-active"><img src="/_nuxt/img/logo.7269efb.png" alt="site logo" class="navbar-logo-image"></a></div> <div class="navbar-item-wrapper"><a href="/blog" class="navbar-item nuxt-link-active">blog</a> <a href="/notes" class="navbar-item">notes</a> <a href="/archive" class="navbar-item">archive</a></div></nav> <hr> <main class="content-wrapper flex justify-center"><div class="my-5 content bg-white lg:w-3/5 md:w-full max-width-full" data-v-e2e0216e><main class="bg-white py-5 px-8 w-screen lg:w-full" data-v-e2e0216e><article><p class="my-5">29 January 2021, 05:02</p> <h1 class="title">wasm first steps</h1> <hr> <div class="p-2 nuxt-content"><p>After a number of weeks getting to grips with the basics of Rust and some of the syntax I'm going to explore how we can use Rust code with JavaScript via Web Assembly.</p>
<h3 id="getting-started"><a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Getting Started</h3>
<p>I'll be using a template to get started, the folks over at <a href="https://github.com/rustwasm" rel="nofollow noopener noreferrer" target="_blank">rustwasm</a> have set up the boiler plate to get started. Note that <a href="https://github.com/cargo-generate/cargo-generate" rel="nofollow noopener noreferrer" target="_blank">cargo generate</a> is also used.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>cargo generate --git https://github.com/rustwasm/wasm-pack-template
</code></pre></div>
<p>using <code>wasm-game-of-life</code> as name of the project.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-bash"><code><span class="token builtin class-name">cd</span> wasm-game-of-life
</code></pre></div>
<p>here are the contents:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-bash"><code>wasm-game-of-life/
├── Cargo.toml
├── LICENSE_APACHE
├── LICENSE_MIT
├── README.md
└── src
   ├── lib.rs
   └── utils.rs
</code></pre></div>
<p>an overview</p>
<p><code>Cargo.toml</code></p>
<p>Here is where dependencies and meta data are defined for the cargo, which is Rust's package manager and build tool. As we used a template to inialise the project, the file is already pre-configured with the <code>wasm-bindgen</code> dependency.</p>
<p><code>src/lib.rs</code>
This file is the root of the Rust crate that is going to be compiled into WebAssembly. It uses <code>wasm-bindgen</code> to interface with JavaScript. It currently exports the <code>greet</code> function which uses the <code>window.alert</code> method to alert a message.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-rust"><code><span class="token keyword">mod</span> <span class="token module-declaration namespace">utils</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token namespace">wasm_bindgen<span class="token punctuation">::</span>prelude<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token comment">// When the `wee_alloc` feature is enabled, use `wee_alloc` as the global</span>
<span class="token comment">// allocator.</span>
<span class="token attribute attr-name">#[cfg(feature = <span class="token string">"wee_alloc"</span>)]</span>
<span class="token attribute attr-name">#[global_allocator]</span>
<span class="token keyword">static</span> <span class="token constant">ALLOC</span><span class="token punctuation">:</span> <span class="token namespace">wee_alloc<span class="token punctuation">::</span></span><span class="token class-name">WeeAlloc</span> <span class="token operator">=</span> <span class="token namespace">wee_alloc<span class="token punctuation">::</span></span><span class="token class-name">WeeAlloc</span><span class="token punctuation">::</span><span class="token constant">INIT</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[wasm_bindgen]</span>
<span class="token keyword">extern</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&</span><span class="token keyword">str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[wasm_bindgen]</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Hello, wasm-game-of-life!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p><code>src/utils.rs</code></p>
<p>The src/utils.rs module provides common utilities to make working with Rust compiled to WebAssembly easier.</p>
<h3 id="building-the-project"><a href="#building-the-project" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Building the project</h3>
<p>I'll be using <a href="https://github.com/rustwasm/wasm-pack" rel="nofollow noopener noreferrer" target="_blank">wasm-pack</a> to orchestrate the following build steps:</p>
<ul>
<li>Ensure that we have Rust 1.30 or newer and the <code>wasm32-unknown-unknown</code> target installed via <code>rustup</code>,</li>
<li>Compile the Rust sources into a WebAssembly <code>.wasm</code> binary via cargo,</li>
<li>Use <code>wasm-bindgen</code> to generate the JavaScript API for using our Rust-generated WebAssembly.</li>
</ul>
<p>The above points can be satisfied, the following command is ran inside the project directory:
<code>wasm-pack build</code></p>
<p>When the build is completed, artifacts are generated in the <code>pkg</code> directory, with the following content:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-bash"><code>pkg/
├── package.json
├── README.md
├── wasm_game_of_life_bg.wasm
├── wasm_game_of_life.d.ts
└── wasm_game_of_life.js
</code></pre></div>
<p><code>wasm-game-of-life/pkg/wasm_game_of_life.d.ts</code></p>
<p>The <code>.d.ts</code> file contains Typescript type declarations for the JavaScript glue. One advantage of this is the ability to have calls into WebAssembly functions type checked, meaning an IDE can provide autocompletions and suggestions.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</code></pre></div>
<p><code>wasm-game-of-life/pkg/package.json</code></p>
<p>The <a href="https://docs.npmjs.com/cli/v7/configuring-npm/package-json" rel="nofollow noopener noreferrer" target="_blank">package.json</a> file contains metadata about the generated JavaScript and WebAssembly package. This is used by npm and JavaScript bundlers to determine dependencies across packages, package names, versions, and a bunch of other stuff. It helps Rust (and ultimately wasm) integrate with JavaScript tooling and allows us to publish the package to npm.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"wasm-game-of-life"</span><span class="token punctuation">,</span>
  <span class="token property">"collaborators"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"Your Name &lt;your.email@example.com>"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.1.0"</span><span class="token punctuation">,</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"wasm_game_of_life_bg.wasm"</span><span class="token punctuation">,</span>
    <span class="token string">"wasm_game_of_life.d.ts"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"wasm_game_of_life.js"</span><span class="token punctuation">,</span>
  <span class="token property">"types"</span><span class="token operator">:</span> <span class="token string">"wasm_game_of_life.d.ts"</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h3 id="adding-the-package-it-to-a-web-page"><a href="#adding-the-package-it-to-a-web-page" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Adding the package it to a web page</h3>
<p>To add the package to a web page we can bootstrap a web based wasm project using the <a href="https://github.com/rustwasm/create-wasm-app" rel="nofollow noopener noreferrer" target="_blank">create-wasm-app</a> JavaScript project template.</p>
<p>Run this command within the project directory:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-bash"><code><span class="token function">npm</span> init wasm-app www
</code></pre></div>
<p>Here's the output in the <code>wasm-game-of-life/www</code> directoy:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-bash"><code>wasm-game-of-life/www/
├── bootstrap.js
├── index.html
├── index.js
├── LICENSE-APACHE
├── LICENSE-MIT
├── package.json
├── README.md
└── webpack.config.js
</code></pre></div>
<p>Let's take a tour of the files.</p>
<p><code>wasm-game-of-life/www/package.json</code></p>
<p>This package.json comes pre-configured with <code>webpack</code> and <code>webpack-dev-serve</code>r dependencies, as well as a dependency on <code>hello-wasm-pac</code>k, which is a version of the initial wasm-pack-template package that has been published to npm.</p>
<p><code>wasm-game-of-life/www/webpack.config.js</code></p>
<p>This file configures webpack and its local development server. It comes pre-configured, and you shouldn't have to tweak this at all to get webpack and its local development server working.</p>
<p><code>wasm-game-of-life/www/index.html</code></p>
<p>This is the root HTML file for the Web page. It doesn't do much other than load bootstrap.js, which is a very thin wrapper around index.js.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Hello wasm-pack!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./bootstrap.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>

</code></pre></div>
<p><code>wasm-game-of-life/www/index.js</code></p>
<p>The index.js is the main entry point for our Web page's JavaScript. It imports the hello-wasm-pack npm package, which contains the default wasm-pack-template's compiled WebAssembly and JavaScript glue, then it calls hello-wasm-pack's greet function.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-javascript"><code><span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> wasm</span> <span class="token keyword module">from</span> <span class="token string">"hello-wasm-pack"</span><span class="token punctuation">;</span>

wasm<span class="token punctuation">.</span><span class="token method function property-access">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h3 id="install-dependencies"><a href="#install-dependencies" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Install Dependencies</h3>
<p>First, ensure that the local development server and its dependencies are installed by running <code>npm install</code> within the <code>wasm-game-of-life/www</code> subdirectory:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div>
<p>This will read <code>package.json</code> and install the dependencies listed there, including the webpack javascript bundler and development server.</p>
<blockquote>
<p>Note that webpack is not required for working with Rust and WebAssembly, it is just the bundler and development server we've chosen for convenience here. Parcel and Rollup should also support importing WebAssembly as ECMAScript modules. You can also use Rust and WebAssembly <a href="https://rustwasm.github.io/docs/wasm-bindgen/examples/without-a-bundler.html" rel="nofollow noopener noreferrer" target="_blank">without a bundler</a> if you prefer!</p>
</blockquote>
<h3 id="using-local-package-in-www"><a href="#using-local-package-in-www" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Using local package in www</h3>
<p>Rather than use the <code>hello-wasm-pack package</code> from npm, we want to use our local <code>wasm-game-of-life</code> package instead. This will allow us to incrementally develop our Game of Life program.</p>
<p>Open up <code>wasm-game-of-life/www/package.json</code> and next to "devDependencies", add the "dependencies" field, including a "wasm-game-of-life": "file:../pkg" entry:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>                     <span class="token comment">// Add this three lines block!</span>
    <span class="token property">"wasm-game-of-life"</span><span class="token operator">:</span> <span class="token string">"file:../pkg"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Next, modify <code>wasm-game-of-life/www/index.js</code> to import <code>wasm-game-of-life</code> instead of the <code>hello-wasm-pack</code> package:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-javascript"><code><span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> wasm</span> <span class="token keyword module">from</span> <span class="token string">"wasm-game-of-life"</span><span class="token punctuation">;</span>

wasm<span class="token punctuation">.</span><span class="token method function property-access">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Since we declared a new dependency, we need to install it:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token punctuation">(</span>or <span class="token function">npm</span> i<span class="token punctuation">)</span>
</code></pre></div>
<p>The web page is now ready to be served locally!</p>
<h3 id="serving-locally"><a href="#serving-locally" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Serving Locally</h3>
<p>Next, open a new terminal for the development server. Running the server in a new terminal lets us leave it running in the background, and doesn't block us from running other commands in the meantime. In the new terminal, run this command from within the <code>wasm-game-of-life/www</code> directory:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-bash"><code><span class="token function">npm</span> run start
</code></pre></div>
<p>Navigate your Web browser to http://localhost:8080/ and you should be greeted with an alert message. Anytime you make changes and want them reflected on http://localhost:8080/, just re-run the wasm-pack build command within the wasm-game-of-life directory.</p>
<p>That's it, we have a hello world!</p></div></article></main> <section class="mb-5 flex flex-col sm:flex-row" data-v-64af341a data-v-e2e0216e><hr data-v-64af341a> <a href="/blog/wasm-a-wasm-game-of-life" class="p-5 navbar-item" data-v-64af341a><span class="text-xl" data-v-64af341a>← a wasm way of life </span></a> <hr data-v-64af341a> <a href="/blog/rust-ownership" class="ml-auto p-5 navbar-item" data-v-64af341a><span class="text-xl" data-v-64af341a>ownership in rust →</span></a></section></div></main> <hr> <footer class="footer"><ul class="flex justify-center"><li><a href="https://www.twitter.com/admhpr" class="social-media-item"><img src="/_nuxt/img/twitter.b2bafdc.png" alt="twitter icon" class="small_3zOPC"> <span class="social-media-label">Twitter</span></a></li><li><a href="https://www.github.com/admhpr" class="social-media-item"><img src="/_nuxt/img/github.eee4433.png" alt="github icon" class="small_3zOPC"> <span class="social-media-label">GitHub</span></a></li></ul> <div class="flex justify-center">adam harpur 2021 ©</div> <div class="flex justify-center"><a href="https://www.nuxtjs.org"><img src="/_nuxt/img/nuxt-logo.6928986.jpg" alt="nuxt logo" class="pb-10 brand-logo"></a> <a href="https://tailwindcss.com"><img src="/_nuxt/img/tailwind-logo.7aa2204.png" alt="tailwind logo" class="pb-10 brand-logo"></a></div></footer></div></div></div><script defer src="/_nuxt/static/1632587912/blog/wasm-first-steps/state.js"></script><script src="/_nuxt/7fbf335.js" defer></script><script src="/_nuxt/6bb2c61.js" defer></script><script src="/_nuxt/acb0acf.js" defer></script><script src="/_nuxt/2aef28c.js" defer></script><script src="/_nuxt/d794848.js" defer></script>
  </body>
</html>
